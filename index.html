<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Clipboard Layout Editor (Heading only on box)</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:'Segoe UI',system-ui,sans-serif;}
body{background:#f3f4f6;min-height:100vh;}
.container{display:flex;height:100vh;padding:10px;gap:10px;}
/* LEFT PANEL + TOGGLE */
.add-panel-wrapper{position:relative;transition:width .25s;}
.add-panel{width:260px;background:#fff;border-radius:8px;padding:15px;box-shadow:0 2px 8px rgba(0,0,0,0.1);height:100%;display:flex;flex-direction:column;overflow-y:auto;}
.add-panel.collapsed{width:0;padding:0;overflow:hidden;box-shadow:none;}
.collapse-toggle{position:absolute;top:10px;right:-16px;width:16px;height:60px;background:#111827;color:#fff;border-radius:0 6px 6px 0;display:flex;align-items:center;justify-content:center;font-size:10px;cursor:pointer;box-shadow:0 2px 6px rgba(0,0,0,0.3);z-index:5;}
.collapse-toggle i{transition:transform .25s;}
.collapsed + .collapse-toggle i{transform:rotate(180deg);}
.panel-title{display:flex;align-items:center;gap:6px;margin-bottom:8px;font-size:1rem;font-weight:600;}
.mode-label{font-size:0.75rem;color:#6b7280;margin-bottom:6px;}
label{display:block;margin-bottom:4px;font-size:0.8rem;font-weight:600;color:#4b5563;}
/* RESIZABLE TEXTAREA FOR HEADING */
.resizable-input-wrapper {
position: relative;
margin-bottom: 10px;
}
textarea.resizable-heading{
width:100%;
min-height:50px;
border-radius:6px;
border:2px solid #e5e7eb;
padding:6px 8px;
font-size:13px;
resize:both;
overflow:auto;
display:block;
font-family:'Segoe UI',system-ui,sans-serif;
}
textarea.resizable-heading:focus{
outline:none;
border-color:#6366f1;
box-shadow:0 0 0 2px rgba(99,102,241,0.2);
}
textarea.resizable-textarea{
width:100%;
min-height:70px;
border-radius:6px;
border:2px solid #e5e7eb;
padding:8px;
font-size:13px;
resize:both;
overflow:auto;
}
textarea.resizable-textarea:focus{
outline:none;
border-color:#6366f1;
box-shadow:0 0 0 2px rgba(99,102,241,0.2);
}
.resize-icon {
position: absolute;
right: 4px;
bottom: 4px;
color: #9ca3af;
font-size: 10px;
pointer-events: none;
}
.color-options{display:grid;grid-template-columns:repeat(6,1fr);gap:6px;margin-bottom:8px;}
.color-option{width:26px;height:26px;border-radius:6px;cursor:pointer;border:2px solid transparent;}
.color-option.selected{border-color:#111827;}
.custom-color{display:flex;align-items:center;gap:6px;margin-bottom:8px;}
.custom-color input[type="color"]{width:40px;height:28px;border-radius:6px;border:none;cursor:pointer;}
.btn{background:linear-gradient(to right,#6366f1,#4f46e5);border:none;color:#fff;padding:7px 9px;border-radius:6px;font-size:13px;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:6px;margin-bottom:6px;}
.btn.secondary{background:#e5e7eb;color:#111827;}
.btn.save{background:linear-gradient(to right,#059669,#047857);animation:pulse 2s infinite;}
@keyframes pulse{0%,100%{opacity:1;}50%{opacity:0.8;}}
.quick-buttons{display:grid;grid-template-columns:repeat(2,1fr);gap:6px;}
.quick-btn{background:#f9fafb;border:1px solid #e5e7eb;font-size:11px;padding:5px 3px;border-radius:5px;cursor:pointer;}
.hint{margin-top:6px;font-size:0.75rem;color:#6b7280;}
.edit-info{font-size:0.75rem;color:#10b981;margin-bottom:4px;}
.board{flex:1;background:#fff;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,0.1);position:relative;overflow:hidden;}
.clipboard-item{
position:absolute;
min-width:100px;
min-height:40px;
width:140px;
height:60px;
border-radius:6px;
padding:6px 8px;
cursor:move;
display:flex;
align-items:flex-start;
justify-content:flex-start;
color:#fff;
font-size:12px;
font-weight:600;
box-shadow:0 2px 6px rgba(0,0,0,0.15);
user-select:none;
}
.clipboard-item.selected{outline:2px solid #facc15;}
.item-heading{
max-width:100%;
white-space:pre-wrap;
word-wrap:break-word;
overflow:hidden;
line-height:1.3;
padding-top:2px;
}
.resize-handle{position:absolute;width:10px;height:10px;right:2px;bottom:2px;background:rgba(0,0,0,0.4);border-radius:2px;cursor:se-resize;}
.delete-btn{position:absolute;right:2px;top:2px;width:18px;height:18px;border-radius:50%;border:none;font-size:10px;background:rgba(0,0,0,0.4);color:#fff;cursor:pointer;}
.copy-indicator{position:absolute;left:4px;top:4px;padding:2px 4px;border-radius:3px;background:rgba(16,185,129,0.9);color:#fff;font-size:9px;opacity:0;transition:opacity .2s;}
.clipboard-item.copied .copy-indicator{opacity:1;}
.notification{position:fixed;right:20px;bottom:20px;background:#10b981;color:#fff;padding:8px 12px;border-radius:6px;font-size:0.85rem;display:flex;gap:6px;align-items:center;box-shadow:0 2px 8px rgba(0,0,0,0.2);opacity:0;transform:translateY(100px);transition:all .3s;z-index:100;}
.notification.show{opacity:1;transform:translateY(0);}
/* MULTI COPY PANEL - Draggable, Full Content Display */
.multi-copy-panel {
position: fixed;
right: 10px;
top: 50%;
transform: translateY(-50%);
width: 220px;
max-height: 80vh;
background: rgba(255, 255, 255, 0.95);
border-radius: 8px;
padding: 10px;
box-shadow: 0 4px 12px rgba(0,0,0,0.15);
display: none;
flex-direction: column;
z-index: 999;
border: 1px solid #e5e7eb;
cursor: move;
}
.multi-copy-panel.active {
display: flex;
}
.multi-panel-header {
font-size: 11px;
font-weight: 600;
color: #111827;
margin-bottom: 8px;
padding-bottom: 6px;
border-bottom: 1px solid #e5e7eb;
display: flex;
align-items: center;
gap: 4px;
cursor: move;
}
.multi-items-list {
flex: 1;
overflow-y: auto;
margin-bottom: 8px;
max-height: 500px;
cursor: default;
}
.multi-item {
background: #f9fafb;
border: 1px solid #e5e7eb;
border-radius: 4px;
padding: 6px 8px;
margin-bottom: 6px;
font-size: 10px;
color: #374151;
word-break: break-word;
line-height: 1.4;
white-space: pre-wrap;
max-height: none;
font-family: 'Consolas', 'Monaco', monospace;
}
.multi-clear-btn {
background: #ef4444;
color: #fff;
border: none;
padding: 5px 10px;
border-radius: 4px;
font-size: 10px;
cursor: pointer;
font-weight: 600;
}
.multi-clear-btn:hover {
background: #dc2626;
}
.multi-toggle-btn {
background: #10b981 !important;
}
.multi-toggle-btn.active {
background: #ef4444 !important;
}
/* FLOATING RIGHT TOGGLE BUTTON */
.multi-float-toggle {
position: fixed;
right: 10px;
top: 20px;
width: 50px;
height: 50px;
background: #10b981;
border: none;
border-radius: 8px;
color: #fff;
font-size: 18px;
cursor: pointer;
box-shadow: 0 4px 12px rgba(0,0,0,0.2);
display: flex;
align-items: center;
justify-content: center;
z-index: 1000;
transition: all 0.2s;
}
.multi-float-toggle:hover {
transform: scale(1.05);
box-shadow: 0 6px 16px rgba(0,0,0,0.25);
}
.multi-float-toggle.active {
background: #ef4444;
}
</style>
</head>
<body>
<div class="container">
<div class="add-panel-wrapper">
<div class="add-panel collapsed" id="addPanel">
<div class="panel-title">
<i class="fas fa-clipboard-list"></i>
Clipboard Manager
</div>
<div class="mode-label" id="modeLabel">Mode: Add new</div>
<div class="edit-info" id="editInfo" style="display:none">
Editing Box ID: <span id="editId"></span>
</div>
<label>Heading (optional - shown on box)</label>
<div class="resizable-input-wrapper">
<textarea id="headingInput" class="resizable-heading" placeholder="e.g. Email Address
Can add multiple lines"></textarea>
<i class="fas fa-grip-lines-vertical resize-icon"></i>
</div>
<label>Content (what to copy)</label>
<div class="resizable-input-wrapper">
<textarea id="contentInput" class="resizable-textarea" placeholder="Enter the text to copy..."></textarea>
<i class="fas fa-grip-lines-vertical resize-icon"></i>
</div>
<label>Pick Color</label>
<div class="color-options" id="colorOptions">
<div class="color-option selected" data-color="#6366f1" style="background:#6366f1"></div>
<div class="color-option" data-color="#ec4899" style="background:#ec4899"></div>
<div class="color-option" data-color="#f59e0b" style="background:#f59e0b"></div>
<div class="color-option" data-color="#10b981" style="background:#10b981"></div>
<div class="color-option" data-color="#3b82f6" style="background:#3b82f6"></div>
<div class="color-option" data-color="#8b5cf6" style="background:#8b5cf6"></div>
</div>
<div class="custom-color">
<input type="color" id="customColor" value="#6366f1">
<span style="font-size:0.75rem">Custom Hex</span>
</div>
<button class="btn" id="addBtn"><i class="fas fa-plus"></i>Add new box</button>
<button class="btn secondary" id="updateBtn" disabled>
<i class="fas fa-pen"></i>Update selected box
</button>
<button class="btn save" id="saveFileBtn">
<i class="fas fa-save"></i>Save to HTML File
</button>
<button class="btn multi-toggle-btn" id="multiCopyBtn">
<i class="fas fa-layer-group"></i>Multi Copy
</button>
<div class="mode-label">Quick Actions</div>
<div class="quick-buttons">
<button class="quick-btn" data-heading="Email" data-content="user@email.com">Email</button>
<button class="quick-btn" data-heading="API Key" data-content="API_KEY_123">API</button>
<button class="quick-btn" data-heading="Password" data-content="Pass@123">Password</button>
<button class="quick-btn" data-heading="Phone" data-content="+123456789">Phone</button>
</div>
<div class="hint">
Ctrl+Enter to add • Click box to copy & edit • Ctrl+Shift+X to clear all • Drag corner to resize inputs • Save button creates downloadable file
</div>
</div>
<div class="collapse-toggle" id="collapseToggle">
<i class="fas fa-chevron-left"></i>
</div>
</div>
<div class="board" id="board"></div>
</div>
<div class="notification" id="notification"></div>
<!-- FLOATING MULTI COPY TOGGLE -->
<button class="multi-float-toggle" id="multiFloatToggle">
<i class="fas fa-layer-group"></i>
</button>
<!-- MULTI COPY PANEL (DRAGGABLE) -->
<div class="multi-copy-panel" id="multiCopyPanel">
<div class="multi-panel-header" id="multiPanelHeader">
<i class="fas fa-layer-group" style="font-size:10px"></i>
<span>Combined Copy</span>
</div>
<div class="multi-items-list" id="multiItemsList"></div>
<button class="multi-clear-btn" id="multiClearBtn">Clear All</button>
</div>

<!-- EMBEDDED DATA (DO NOT MODIFY THIS SECTION MANUALLY) -->
<script id="embeddedData" type="application/json">
[]
</script>

<script>
document.addEventListener('DOMContentLoaded',()=>{
const board=document.getElementById('board');
const headingInput=document.getElementById('headingInput');
const contentInput=document.getElementById('contentInput');
const addBtn=document.getElementById('addBtn');
const updateBtn=document.getElementById('updateBtn');
const saveFileBtn=document.getElementById('saveFileBtn');
const colorOptions=document.querySelectorAll('.color-option');
const customColor=document.getElementById('customColor');
const quickButtons=document.querySelectorAll('.quick-btn');
const notification=document.getElementById('notification');
const addPanel=document.getElementById('addPanel');
const collapseToggle=document.getElementById('collapseToggle');
const editInfo=document.getElementById('editInfo');
const editIdSpan=document.getElementById('editId');
const modeLabel=document.getElementById('modeLabel');

// Load items from embedded data first, then fallback to localStorage
let embeddedDataElement = document.getElementById('embeddedData');
let embeddedItems = [];
try {
embeddedItems = JSON.parse(embeddedDataElement.textContent);
} catch(e) {
embeddedItems = [];
}

let items = embeddedItems.length > 0 ? embeddedItems : (JSON.parse(localStorage.getItem('clipboard_layout_items'))||[]);
let selectedColor='#6366f1';
let selectedId=null;
const multiCopyBtn=document.getElementById('multiCopyBtn');
const multiFloatToggle=document.getElementById('multiFloatToggle');
const multiCopyPanel=document.getElementById('multiCopyPanel');
const multiPanelHeader=document.getElementById('multiPanelHeader');
const multiItemsList=document.getElementById('multiItemsList');
const multiClearBtn=document.getElementById('multiClearBtn');
let multiCopyActive=false;
let multiCopyItems=[];

function saveLayout(){
localStorage.setItem('clipboard_layout_items',JSON.stringify(items));
}

function showNotification(msg,type='success'){
notification.textContent=msg;
notification.style.background=type==='success'?'#10b981':(type==='error'?'#ef4444':'#3b82f6');
notification.classList.add('show');
setTimeout(()=>notification.classList.remove('show'),2500);
}

function escapeHtml(text){
const div=document.createElement('div');
div.textContent=text;
return div.innerHTML;
}

function clearSelection(){
document.querySelectorAll('.clipboard-item').forEach(el=>el.classList.remove('selected'));
selectedId=null;
updateBtn.disabled=true;
modeLabel.textContent='Mode: Add new';
editInfo.style.display='none';
editIdSpan.textContent='';
}

function renderItems(){
document.querySelectorAll('.clipboard-item').forEach(el=>el.remove());
items.forEach(item=>{
const el=document.createElement('div');
el.className='clipboard-item';
el.dataset.id=item.id;
el.style.backgroundColor=item.color;
el.style.left=item.x+'px';
el.style.top=item.y+'px';
el.style.width=item.w+'px';
el.style.height=item.h+'px';
el.innerHTML=`
<div class="copy-indicator">Copied</div>
<button class="delete-btn"><i class="fas fa-times"></i></button>
<div class="item-heading">${escapeHtml(item.heading || '').replace(/\n/g,'<br>')}</div>
<div class="resize-handle"></div>
`;
if(item.id===selectedId) el.classList.add('selected');
board.appendChild(el);
attachDrag(el,item.id);
attachResize(el,item.id);
el.addEventListener('click',(e)=>{
if (e.target.closest('.delete-btn') || e.target.closest('.resize-handle')) return;
selectedId=item.id;
document.querySelectorAll('.clipboard-item').forEach(b=>b.classList.remove('selected'));
el.classList.add('selected');
loadItemIntoEditor(item);
navigator.clipboard.writeText(item.content || '').then(()=>{
el.classList.add('copied');
if(multiCopyActive){
multiCopyItems.push(item.content || '');
renderMultiList();
showNotification('Added to multi-copy','success');
}else{
showNotification('Content copied','success');
}
setTimeout(()=>el.classList.remove('copied'),700);
}).catch(()=>showNotification('Copy failed','error'));
});
el.querySelector('.delete-btn').addEventListener('click',(e)=>{
e.stopPropagation();
items=items.filter(it=>it.id!==item.id);
saveLayout();
if(selectedId===item.id) clearSelection();
renderItems();
showNotification('Item deleted','info');
});
});
}

function loadItemIntoEditor(item){
headingInput.value=item.heading || '';
contentInput.value=item.content || '';
selectedColor=item.color;
customColor.value=item.color;
colorOptions.forEach(o=>{
o.classList.toggle('selected', o.dataset.color===item.color);
});
modeLabel.textContent='Mode: Edit selected';
editInfo.style.display='block';
editIdSpan.textContent=item.id;
updateBtn.disabled=false;
}

function attachDrag(element,id){
let dragging=false,offsetX,offsetY;
element.addEventListener('mousedown',e=>{
if (e.target.closest('.delete-btn') || e.target.closest('.resize-handle')) return;
dragging=true;
const rect=element.getBoundingClientRect();
const boardRect=board.getBoundingClientRect();
offsetX=e.clientX-rect.left;
offsetY=e.clientY-rect.top;
element.style.zIndex=1000;
});
document.addEventListener('mousemove',e=>{
if(!dragging) return;
const boardRect=board.getBoundingClientRect();
let x=e.clientX-boardRect.left-offsetX;
let y=e.clientY-boardRect.top-offsetY;
if(x<0)x=0;
if(y<0)y=0;
element.style.left=x+'px';
element.style.top=y+'px';
});
document.addEventListener('mouseup',()=>{
if(!dragging) return;
dragging=false;
element.style.zIndex='';
const idx=items.findIndex(it=>it.id===id);
if(idx!==-1){
const rect=element.getBoundingClientRect();
const bRect=board.getBoundingClientRect();
items[idx].x=rect.left-bRect.left;
items[idx].y=rect.top-bRect.top;
saveLayout();
}
});
}

function attachResize(element,id){
const handle=element.querySelector('.resize-handle');
let startX,startY,startW,startH,resizing=false;
handle.addEventListener('mousedown',e=>{
e.stopPropagation();
resizing=true;
const rect=element.getBoundingClientRect();
startX=e.clientX;
startY=e.clientY;
startW=rect.width;
startH=rect.height;
});
document.addEventListener('mousemove',e=>{
if(!resizing) return;
let w=startW+(e.clientX-startX);
let h=startH+(e.clientY-startY);
if(w<100)w=100;
if(h<40)h=40;
element.style.width=w+'px';
element.style.height=h+'px';
});
document.addEventListener('mouseup',()=>{
if(!resizing) return;
resizing=false;
const idx=items.findIndex(it=>it.id===id);
if(idx!==-1){
const rect=element.getBoundingClientRect();
items[idx].w=rect.width;
items[idx].h=rect.height;
saveLayout();
}
});
}

function addItem(heading,content){
if(!content.trim()){
showNotification('Enter content (what to copy)','warning');
return;
}
const boardRect=board.getBoundingClientRect();
const id=Date.now();
const item={
id,
heading: heading && heading.trim() ? heading.trim() : content.slice(0,20),
content: content,
color:selectedColor,
x:20+(items.length*10)%(Math.max(boardRect.width-160,160)),
y:20+(items.length*10)%120,
w:140,
h:60
};
items.push(item);
saveLayout();
clearSelection();
renderItems();
headingInput.value='';
contentInput.value='';
contentInput.focus();
}

function updateSelectedItem(){
if(!selectedId){
showNotification('Select a box to edit','warning');
return;
}
const idx=items.findIndex(it=>it.id===selectedId);
if(idx===-1) return;
const newHeading=headingInput.value.trim();
items[idx].heading=newHeading || items[idx].heading;
items[idx].content=contentInput.value;
items[idx].color=selectedColor;
saveLayout();
renderItems();
showNotification('Box updated','success');
}

function saveToFile() {
// Get current HTML document
const htmlDoc = document.documentElement.outerHTML;
// Replace the embedded data section with current items
const dataScript = `<script id="embeddedData" type="application/json">\n${JSON.stringify(items, null, 2)}\n<\/script>`;
const updatedHtml = htmlDoc.replace(
/<script id="embeddedData" type="application\/json">[\s\S]*?<\/script>/,
dataScript
);
// Create blob and download
const blob = new Blob([updatedHtml], { type: 'text/html' });
const url = URL.createObjectURL(blob);
const a = document.createElement('a');
a.href = url;
a.download = 'clipboard-manager-' + new Date().toISOString().slice(0,10) + '.html';
document.body.appendChild(a);
a.click();
document.body.removeChild(a);
URL.revokeObjectURL(url);
showNotification('HTML file saved with ' + items.length + ' items!', 'success');
}

function renderMultiList(){
multiItemsList.innerHTML='';
multiCopyItems.forEach((text)=>{
const div=document.createElement('div');
div.className='multi-item';
div.textContent=text;
multiItemsList.appendChild(div);
});
if(multiCopyItems.length>0){
const combined=multiCopyItems.join('\n');
navigator.clipboard.writeText(combined).catch(()=>{});
}
}

function toggleMultiCopy(){
multiCopyActive=!multiCopyActive;
multiCopyPanel.classList.toggle('active',multiCopyActive);
multiCopyBtn.classList.toggle('active',multiCopyActive);
multiFloatToggle.classList.toggle('active',multiCopyActive);
if(multiCopyActive){
multiCopyBtn.innerHTML='<i class="fas fa-stop-circle"></i>Stop Multi';
multiFloatToggle.innerHTML='<i class="fas fa-stop-circle"></i>';
showNotification('Multi-Copy Mode ON','success');
}else{
multiCopyBtn.innerHTML='<i class="fas fa-layer-group"></i>Multi Copy';
multiFloatToggle.innerHTML='<i class="fas fa-layer-group"></i>';
multiCopyItems=[];
renderMultiList();
showNotification('Multi-Copy Mode OFF','info');
}
}

multiCopyBtn.addEventListener('click',toggleMultiCopy);
multiFloatToggle.addEventListener('click',toggleMultiCopy);
multiClearBtn.addEventListener('click',()=>{
multiCopyItems=[];
renderMultiList();
navigator.clipboard.writeText('');
showNotification('Multi-copy list cleared','info');
});

let panelDragging=false;
let panelOffsetX=0;
let panelOffsetY=0;
multiPanelHeader.addEventListener('mousedown',(e)=>{
panelDragging=true;
const rect=multiCopyPanel.getBoundingClientRect();
panelOffsetX=e.clientX-rect.left;
panelOffsetY=e.clientY-rect.top;
multiCopyPanel.style.cursor='grabbing';
});
document.addEventListener('mousemove',(e)=>{
if(!panelDragging) return;
let x=e.clientX-panelOffsetX;
let y=e.clientY-panelOffsetY;
const maxX=window.innerWidth-multiCopyPanel.offsetWidth;
const maxY=window.innerHeight-multiCopyPanel.offsetHeight;
x=Math.max(0,Math.min(x,maxX));
y=Math.max(0,Math.min(y,maxY));
multiCopyPanel.style.left=x+'px';
multiCopyPanel.style.top=y+'px';
multiCopyPanel.style.transform='none';
multiCopyPanel.style.right='auto';
});
document.addEventListener('mouseup',()=>{
if(!panelDragging) return;
panelDragging=false;
multiCopyPanel.style.cursor='move';
});

colorOptions.forEach(opt=>{
opt.addEventListener('click',()=>{
colorOptions.forEach(o=>o.classList.remove('selected'));
opt.classList.add('selected');
selectedColor=opt.dataset.color;
customColor.value=selectedColor;
});
});

customColor.addEventListener('change',e=>{
selectedColor=e.target.value;
colorOptions.forEach(o=>o.classList.remove('selected'));
});

addBtn.addEventListener('click',()=>addItem(headingInput.value,contentInput.value));
contentInput.addEventListener('keydown',e=>{
if((e.ctrlKey||e.metaKey)&&e.key==='Enter') addItem(headingInput.value,contentInput.value);
});
updateBtn.addEventListener('click',updateSelectedItem);
saveFileBtn.addEventListener('click',saveToFile);

quickButtons.forEach(btn=>{
btn.addEventListener('click',()=>{
addItem(btn.dataset.heading,btn.dataset.content);
});
});

document.addEventListener('keydown',(e)=>{
if(e.ctrlKey && e.shiftKey && e.key.toLowerCase()==='x'){
if(!items.length) return;
if(confirm(`Delete all ${items.length} items?`)){
items=[];
saveLayout();
clearSelection();
renderItems();
}
}
});

collapseToggle.addEventListener('click',()=>{
addPanel.classList.toggle('collapsed');
});

renderItems();
});
</script>
</body>
</html>
